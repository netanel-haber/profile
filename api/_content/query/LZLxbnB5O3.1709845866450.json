{"_path":"/ok-sometimes-async-await","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Ok, Sometimes Async Await","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"ok-sometimes-async-await"},"children":[{"type":"text","value":"Ok, Sometimes Async-Await"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Normally, I continue believing that the class "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"promise.then().catch().finally()"}]},{"type":"text","value":" is nicer than using the newer ES17 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"async-await"}]},{"type":"text","value":" syntax, because of function composability.\nThere are 2 cases where I think "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"async-await"}]},{"type":"text","value":" is neater, and one where it may perceivably come in handy:"}]},{"type":"element","tag":"h3","props":{"id":"_1-early-returnthrowing-errors"},"children":[{"type":"text","value":"1. Early Return/Throwing Errors"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes synthwave-84","code":"async function returnEarly(): Promise<SomeType | undefined> {\n  if (someCondition) return;\n  await networkRequest();\n  if (someOtherCondition) return;\n  return await someOtherNetworkRequest();\n}\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" returnEarly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":"SomeType"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" undefined"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"> {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"someCondition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" networkRequest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"someOtherCondition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" someOtherNetworkRequest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This way, your function can return early concisely, "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"but still always return a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Promise"}]}]},{"type":"text","value":".\nThis is because, all values returned from an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"async function"}]},{"type":"text","value":" are automatically wrapped in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Promise"}]},{"type":"text","value":" if they aren't already. The equivalent code is pretty ugly:"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes synthwave-84","code":"function returnEarly(): Promise<SomeType | undefined> {\n  if (someCondition) return Promise.resolve();\n  return networkRequest().then(()=>{\n    if (someOtherCondition) return Promise.resolve();\n    return someOtherNetworkRequest();\n  })\n}\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" returnEarly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":"SomeType"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" undefined"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"> {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"someCondition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" networkRequest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"(()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"someOtherCondition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" someOtherNetworkRequest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_2-promise-drilling"},"children":[{"type":"text","value":"2. Promise Drilling"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes synthwave-84","code":"async function hotPotato() {\n  const a = await networkRequestA();\n  const b = await networkRequestB(a);\n  return await networkRequestC(a, b);\n}\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" hotPotato"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":" a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFFFFFEE"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" networkRequestA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":" b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFFFFFEE"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" networkRequestB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" networkRequestC"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes, a computation requires a value several promises upstream. Using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"async-await"}]},{"type":"text","value":", you see the entire function's scope trivially, so you don't need to drill down with the value."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The equivalent code is ugly:"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes synthwave-84","code":"function hotPotato() {\n  return A()\n  .then((a)=>B(a).then((b)=>[a, b]))\n  .then(([a, b])=>C(a, b));\n}\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" hotPotato"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":" A"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"]))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"((["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"])"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_3-object-asyncfunction"},"children":[{"type":"text","value":"3. [object AsyncFunction]"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This does not generally strike me as useful, but can theoretically come in handy."}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes synthwave-84","code":"Object.prototype.toString.call(async ()=>producePromise()) // '[object AsyncFunction]'\nObject.prototype.toString.call(()=>producePromise()) // '[object Function]'\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"producePromise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#848BBD;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// '[object AsyncFunction]'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#FE4450"},"children":[{"type":"text","value":"Object"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"prototype"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF7EDB"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"call"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"(()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FEDE5D"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#36F9F6"},"children":[{"type":"text","value":"producePromise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BBBBBB"},"children":[{"type":"text","value":"()) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#848BBD;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// '[object Function]'\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So the language gives us a way to know if a function was declared with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" modifier.\nIn some contrived scenario, we can imagine that it may be very useful to be able to check during runtime if the function will be asynchronous "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"before invoking it"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"ok-sometimes-async-await","depth":2,"text":"Ok, Sometimes Async-Await","children":[{"id":"_1-early-returnthrowing-errors","depth":3,"text":"1. Early Return/Throwing Errors"},{"id":"_2-promise-drilling","depth":3,"text":"2. Promise Drilling"},{"id":"_3-object-asyncfunction","depth":3,"text":"3. [object AsyncFunction]"}]}]}},"_type":"markdown","_id":"content:Ok, Sometimes Async-Await.md","_source":"content","_file":"Ok, Sometimes Async-Await.md","_extension":"md"}